<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no" >
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script>
    if(localStorage.getItem('token')!=null&&localStorage.getItem('userid')!=null){
            $.ajax({
                 url: 'http://35.154.144.146/api/product/',
                 method:'GET',
                 beforeSend: function (xhr) {
                     xhr.setRequestHeader ("Authorization", "Basic " + localStorage.getItem('token'));
                   },
                 success:function(data,_,xhr){
                     if(xhr.status==200){     
                 location.href=location.origin+'/itemslist.html';
                location.href='http://35.154.144.146';
                      }
                 },
                error:function(){
//                        alert("error");
                }
                  
             });
    }
    </script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
<!--    <link href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css" rel="stylesheet">-->
    <style>
    body{font-size: 18px;background-color: #4285F4; color:white;}  
    input{color: black !important;font-size: 20px;padding:10px;height:48px !important;margin: 15px 0px;}
    .login input:focus{outline: none;border: 1px solid #ccc;box-shadow: none;} 
        a{color:black;background: white;font-size:20px;font-weight: 800;width:100%;display: block;}
    </style>
</head>
<body>
    <div class="text-center col-xs-8 login" style="float:none; margin:0px auto;">
        <form>
      <input type="text" id="username" placeholder="Enter waiter id" class="form-control" name="username" required>
        <input type="password" id="password" placeholder="Enter password" class="form-control" name="password" required>
        <a href="javascript:void(0);" onclick="authenticate();" class="btn btn-lg" style="font-size:20px;">Submit</a>   
        </form>
    </div>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script>
         if($(window).height()>$(".login").height())
     $(".login").css({"margin-top":(($(window).height()-$(".login").height())/2)+"px"});
            
         function authenticate(){
             console.log(localStorage.getItem('token'));
             var username=document.getElementById("username").value;
             var password=document.getElementById("password").value;
             console.log(btoa(username + ":" + password));
             if(username&&password&&username!=""&&password!="")
             $.ajax({
                 url: 'http://35.154.144.146/api/products/',
                 method:'GET',
                 beforeSend: function (xhr) {
                     
                     xhr.setRequestHeader ("Authorization", "Basic " + btoa(username + ":" + password));
                 
                   },
                 success:function(data,_,xhr){
                     if(xhr.status==200){
                       localStorage.setItem('token', btoa(username + ":" + password));
                       localStorage.setItem('userid',username);
                       location.href=location.origin+'/itemslist.html';
//                location.href='http://35.154.144.146/';

                      }
                 },
                    error:function(){
//                        swal("Could not login","Try again", "error");
                        alert("Wrong User id and password");
                    }
                  
             });
             else{
                 alert("Enter Waiter Id and Password")
             }
         }
    </script>
</body>
</html>   